<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Authentication - Activewear Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        .test-header {
            background: #007bff;
            color: white;
            padding: 20px;
            font-weight: 600;
        }
        .test-body {
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .test-button {
            margin: 5px;
            min-width: 150px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-card">
            <div class="test-header">
                <h2><i class="fas fa-vial me-2"></i>Test Authentication System</h2>
                <p class="mb-0">Kiểm tra chức năng đăng nhập và đăng ký</p>
            </div>
            <div class="test-body">
                
                <!-- Test Information -->
                <div class="test-section">
                    <h4><i class="fas fa-info-circle me-2"></i>Thông tin Test</h4>
                    <div class="status info">
                        <strong>Server:</strong> http://localhost:8080<br>
                        <strong>Test Accounts:</strong> admin@datnfpolysd45.com / password<br>
                        <strong>Test User:</strong> customer@example.com / password
                    </div>
                </div>

                <!-- Test Login -->
                <div class="test-section">
                    <h4><i class="fas fa-sign-in-alt me-2"></i>Test Đăng Nhập</h4>
                    <p>Kiểm tra các tài khoản có sẵn:</p>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Admin Account</h6>
                            <p><strong>Email:</strong> admin@datnfpolysd45.com</p>
                            <p><strong>Password:</strong> password</p>
                            <a href="http://localhost:8080/login" class="btn btn-primary test-button" target="_blank">
                                <i class="fas fa-sign-in-alt me-1"></i>Test Login
                            </a>
                        </div>
                        <div class="col-md-6">
                            <h6>User Account</h6>
                            <p><strong>Email:</strong> customer@example.com</p>
                            <p><strong>Password:</strong> password</p>
                            <a href="http://localhost:8080/login" class="btn btn-success test-button" target="_blank">
                                <i class="fas fa-user me-1"></i>Test Login
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Test Registration -->
                <div class="test-section">
                    <h4><i class="fas fa-user-plus me-2"></i>Test Đăng Ký</h4>
                    <p>Test đăng ký tài khoản mới:</p>
                    <div class="row">
                        <div class="col-md-4">
                            <h6>New User Registration</h6>
                            <p>Thử đăng ký với email mới</p>
                            <a href="http://localhost:8080/register" class="btn btn-warning test-button" target="_blank">
                                <i class="fas fa-user-plus me-1"></i>Test Register
                            </a>
                        </div>
                        <div class="col-md-4">
                            <h6>Email Validation</h6>
                            <p>Test kiểm tra email đã tồn tại</p>
                            <a href="http://localhost:8080/register" class="btn btn-info test-button" target="_blank">
                                <i class="fas fa-envelope me-1"></i>Test Email Check
                            </a>
                        </div>
                        <div class="col-md-4">
                            <h6>OTP Verification</h6>
                            <p>Test xác nhận OTP</p>
                            <a href="http://localhost:8080/otp-verification?email=test@example.com" class="btn btn-secondary test-button" target="_blank">
                                <i class="fas fa-key me-1"></i>Test OTP
                            </a>
                        </div>
                    </div>
                    <div class="status info mt-3">
                        <strong>Test Email Validation:</strong><br>
                        • Thử nhập email: admin@datnfpolysd45.com (đã tồn tại)<br>
                        • Thử nhập email: customer@example.com (đã tồn tại)<br>
                        • Thử nhập email: newuser@example.com (chưa tồn tại)
                    </div>
                </div>

                <!-- Test Debug Endpoints -->
                <div class="test-section">
                    <h4><i class="fas fa-bug me-2"></i>Test Debug Endpoints</h4>
                    <p>Kiểm tra thông tin user và debug:</p>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Debug User Info</h6>
                            <p>Xem thông tin user hiện tại</p>
                            <a href="http://localhost:8080/debug/user" class="btn btn-secondary test-button" target="_blank">
                                <i class="fas fa-user-circle me-1"></i>Debug User
                            </a>
                        </div>
                        <div class="col-md-6">
                            <h6>Debug User by Email</h6>
                            <p>Kiểm tra user theo email</p>
                            <a href="http://localhost:8080/debug/user-by-email?email=admin@datnfpolysd45.com" class="btn btn-dark test-button" target="_blank">
                                <i class="fas fa-search me-1"></i>Debug Email
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Test Protected Pages -->
                <div class="test-section">
                    <h4><i class="fas fa-lock me-2"></i>Test Protected Pages</h4>
                    <p>Kiểm tra các trang yêu cầu đăng nhập:</p>
                    <div class="row">
                        <div class="col-md-4">
                            <h6>Cart Page</h6>
                            <a href="http://localhost:8080/cart" class="btn btn-outline-primary test-button" target="_blank">
                                <i class="fas fa-shopping-cart me-1"></i>Cart
                            </a>
                        </div>
                        <div class="col-md-4">
                            <h6>Checkout Page</h6>
                            <a href="http://localhost:8080/checkout" class="btn btn-outline-success test-button" target="_blank">
                                <i class="fas fa-credit-card me-1"></i>Checkout
                            </a>
                        </div>
                        <div class="col-md-4">
                            <h6>Orders Page</h6>
                            <a href="http://localhost:8080/orders" class="btn btn-outline-warning test-button" target="_blank">
                                <i class="fas fa-list me-1"></i>Orders
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Test Admin Pages -->
                <div class="test-section">
                    <h4><i class="fas fa-crown me-2"></i>Test Admin Pages</h4>
                    <p>Kiểm tra các trang admin (cần đăng nhập với tài khoản admin):</p>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Admin Dashboard</h6>
                            <a href="http://localhost:8080/admin/dashboard" class="btn btn-danger test-button" target="_blank">
                                <i class="fas fa-tachometer-alt me-1"></i>Admin Dashboard
                            </a>
                        </div>
                        <div class="col-md-6">
                            <h6>Product Management</h6>
                            <a href="http://localhost:8080/admin/products" class="btn btn-danger test-button" target="_blank">
                                <i class="fas fa-box me-1"></i>Product Management
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Test Results -->
                <div class="test-section">
                    <h4><i class="fas fa-clipboard-check me-2"></i>Checklist Test</h4>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test1">
                        <label class="form-check-label" for="test1">
                            Đăng nhập thành công với admin@datnfpolysd45.com
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test2">
                        <label class="form-check-label" for="test2">
                            Đăng nhập thành công với customer@example.com
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test3">
                        <label class="form-check-label" for="test3">
                            Đăng ký tài khoản mới thành công
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test4">
                        <label class="form-check-label" for="test4">
                            Xác nhận OTP thành công
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test5">
                        <label class="form-check-label" for="test5">
                            Truy cập trang cart sau khi đăng nhập
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test6">
                        <label class="form-check-label" for="test6">
                            Truy cập admin dashboard với tài khoản admin
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test7">
                        <label class="form-check-label" for="test7">
                            Đăng xuất thành công
                        </label>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="test-section">
                    <h4><i class="fas fa-list-ol me-2"></i>Hướng dẫn Test</h4>
                    <ol>
                        <li><strong>Khởi động server:</strong> Chạy ứng dụng Spring Boot</li>
                        <li><strong>Test đăng nhập:</strong> Thử đăng nhập với các tài khoản có sẵn</li>
                        <li><strong>Test đăng ký:</strong> Đăng ký tài khoản mới và xác nhận OTP</li>
                        <li><strong>Test phân quyền:</strong> Kiểm tra các trang yêu cầu đăng nhập</li>
                        <li><strong>Test admin:</strong> Đăng nhập với admin và truy cập admin panel</li>
                        <li><strong>Test đăng xuất:</strong> Đăng xuất và kiểm tra redirect</li>
                    </ol>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Auto-check test results based on URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const testResult = urlParams.get('test');
        
        if (testResult === 'success') {
            document.querySelector('.test-header').innerHTML += '<div class="status success mt-2"><i class="fas fa-check-circle me-1"></i>Test thành công!</div>';
        } else if (testResult === 'error') {
            document.querySelector('.test-header').innerHTML += '<div class="status error mt-2"><i class="fas fa-times-circle me-1"></i>Test thất bại!</div>';
        }
        
        // Add click handlers for test buttons
        document.querySelectorAll('.test-button').forEach(button => {
            button.addEventListener('click', function() {
                // Add loading state
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>Loading...';
                this.disabled = true;
                
                // Reset after 3 seconds
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.disabled = false;
                }, 3000);
            });
        });
    </script>
</body>
</html>
