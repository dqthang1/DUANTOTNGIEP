<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header-head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet"></noscript>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/css/main.css" as="style">
    <link rel="preload" href="/css/home.css" as="style">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/home.css">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css">
</head>

<body>
    <!-- Promo Bar Fragment -->
    <div th:fragment="promo-bar" class="promo-bar">
        <div class="container">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            <span>FREESHIP ƒë∆°n t·ª´ 499k ‚Äì HN/HCM trong 24h</span>
        </div>
    </div>

    <!-- Header Fragment -->
    <header th:fragment="header" class="header-sticky">
        <div class="container">
            <div class="header-content">
                <!-- Logo and Categories -->
                <div style="display: flex; align-items: center; gap: var(--space-4);">
                    <a href="/" class="logo">
                        <svg class="logo-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        Activewear Store
                    </a>
                    <button class="btn btn-ghost btn-sm" id="categoriesTrigger" style="display: flex; align-items: center; gap: var(--space-2);">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                        Danh m·ª•c
                    </button>
                </div>

                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="T√¨m gi√†y, √°o, ph·ª• ki·ªán‚Ä¶" id="searchInput">
                    <button class="search-button" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>
                </div>

                <!-- Navigation Icons -->
                <div class="nav-icons">
                    <a href="/hotline" class="nav-icon" title="Hotline">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                        </svg>
                    </a>
                    
                    <!-- User menu for logged in users -->
                    <div class="user-menu" th:if="${user != null}">
                        <a href="#" class="nav-icon" title="Profile" id="profileToggle">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </a>
                        <div class="user-dropdown" id="userDropdown">
                            <!-- Admin/Staff Links -->
                            <a th:if="${isAdmin != null and isAdmin}" href="/admin" class="dropdown-item admin-link">
                                üëë Admin Panel
                            </a>
                            <a th:if="${isStaff != null and isStaff}" href="/admin" class="dropdown-item staff-link">
                                üë®‚Äçüíº Staff Panel
                            </a>
                            <div th:if="${isAdmin != null and isAdmin or isStaff != null and isStaff}" class="dropdown-divider"></div>
                            <!-- User Links -->
                            <a href="/profile" class="dropdown-item">
                                üë§ H·ªì s∆° c√° nh√¢n
                            </a>
                            <a href="/orders" class="dropdown-item">
                                üìã ƒê∆°n h√†ng c·ªßa t√¥i
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="/logout" class="dropdown-item">
                                üö™ ƒêƒÉng xu·∫•t
                            </a>
                        </div>
                    </div>
                    
                    <!-- Login link for non-logged in users -->
                    <a href="/login" class="nav-icon" title="ƒêƒÉng nh·∫≠p" th:if="${user == null}">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </a>
                    
                    <a href="/favorites" class="nav-icon" title="Y√™u th√≠ch">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </a>
                    
                    <a href="/cart" class="nav-icon" title="Gi·ªè h√†ng">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                        </svg>
                        <span class="badge" id="cartBadge" th:text="${cartItemCount != null ? cartItemCount : 0}">0</span>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Mega Menu -->
        <div class="mega-menu" id="megaMenu" role="dialog" aria-label="Danh m·ª•c s·∫£n ph·∫©m" aria-hidden="true">
            <div class="mega-menu-content">
                <!-- Danh m·ª•c ch√≠nh -->
                <div class="mega-menu-section">
                    <h4>Danh m·ª•c ch√≠nh</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?category=nam" class="mega-menu-item" data-category="nam" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Nam
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=nu" class="mega-menu-item" data-category="nu" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                N·ªØ
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=chay-bo" class="mega-menu-item" data-category="chay-bo" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                Ch·∫°y b·ªô
                                <span class="mega-menu-badge hot">Hot</span>
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=gym-yoga" class="mega-menu-item" data-category="gym-yoga" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                Gym/Yoga
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=bong-da" class="mega-menu-item" data-category="bong-da" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                                </svg>
                                B√≥ng ƒë√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=phu-kien" class="mega-menu-item" data-category="phu-kien" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                                Ph·ª• ki·ªán
                                <span class="mega-menu-badge new">M·ªõi</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Th∆∞∆°ng hi·ªáu -->
                <div class="mega-menu-section">
                    <h4>Th∆∞∆°ng hi·ªáu</h4>
                    <ul class="mega-menu-links" id="megaMenuBrands">
                        <!-- Dynamic content will be loaded here -->
                    </ul>
                </div>

                <!-- B·ªô s∆∞u t·∫≠p -->
                <div class="mega-menu-section">
                    <h4>B·ªô s∆∞u t·∫≠p</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/collections/nike-running" class="mega-menu-item" data-collection="nike-running" data-tracking="collection">
                                Nike Running
                                <span class="mega-menu-badge sale">-30%</span>
                            </a>
                        </li>
                        <li>
                            <a href="/collections/adidas-training" class="mega-menu-item" data-collection="adidas-training" data-tracking="collection">
                                Adidas Training
                            </a>
                        </li>
                        <li>
                            <a href="/collections/puma-lifestyle" class="mega-menu-item" data-collection="puma-lifestyle" data-tracking="collection">
                                Puma Lifestyle
                            </a>
                        </li>
                        <li>
                            <a href="/collections/vans-skate" class="mega-menu-item" data-collection="vans-skate" data-tracking="collection">
                                Vans Skate
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- ∆Øu ƒë√£i -->
                <div class="mega-menu-section">
                    <h4>∆Øu ƒë√£i</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?discount=true" class="mega-menu-item" data-tracking="promo-discount">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                </svg>
                                S·∫£n ph·∫©m gi·∫£m gi√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?new=true" class="mega-menu-item" data-tracking="promo-new">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                H√†ng m·ªõi v·ªÅ
                            </a>
                        </li>
                        <li>
                            <a href="/products?bestseller=true" class="mega-menu-item" data-tracking="promo-bestseller">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                                </svg>
                                B√°n ch·∫°y nh·∫•t
                            </a>
                        </li>
                        <li>
                            <a href="/promotions" class="mega-menu-item" data-tracking="promo-special">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                </svg>
                                Khuy·∫øn m√£i ƒë·∫∑c bi·ªát
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Promo Card (conditional) -->
                <div class="promo-card" id="promoCard" style="display: none;">
                    <img src="" alt="" class="promo-card-image" id="promoCardImage">
                    <div class="promo-card-content">
                        <h3 class="promo-card-title" id="promoCardTitle"></h3>
                        <p class="promo-card-subtitle" id="promoCardSubtitle"></p>
                        <a href="#" class="promo-card-cta" id="promoCardCta">Kh√°m ph√°</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Off-Canvas Menu Fragment -->
    <div th:fragment="mobile-menu" class="mobile-menu-overlay" id="mobileMenu" role="dialog" aria-label="Menu danh m·ª•c" aria-hidden="true">
        <div class="mobile-menu-backdrop"></div>
        <div class="mobile-menu-panel">
            <div class="mobile-menu-header">
                <h3 class="mobile-menu-title">Danh m·ª•c</h3>
                <button class="mobile-menu-close" aria-label="ƒê√≥ng menu">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="mobile-menu-body">
                <!-- Danh m·ª•c ch√≠nh -->
                <div class="mobile-menu-section">
                    <h4 class="mobile-menu-section-title">Danh m·ª•c ch√≠nh</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?category=nam" class="mega-menu-item" data-category="nam" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Nam
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=nu" class="mega-menu-item" data-category="nu" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                N·ªØ
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=chay-bo" class="mega-menu-item" data-category="chay-bo" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                Ch·∫°y b·ªô
                                <span class="mega-menu-badge hot">Hot</span>
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=gym-yoga" class="mega-menu-item" data-category="gym-yoga" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                Gym/Yoga
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=bong-da" class="mega-menu-item" data-category="bong-da" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                                </svg>
                                B√≥ng ƒë√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=phu-kien" class="mega-menu-item" data-category="phu-kien" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                                Ph·ª• ki·ªán
                                <span class="mega-menu-badge new">M·ªõi</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Accordion cho Th∆∞∆°ng hi·ªáu -->
                <div class="mobile-menu-accordion">
                    <div class="mobile-menu-accordion-item">
                        <button class="mobile-menu-accordion-trigger" aria-expanded="false" aria-controls="brands-accordion">
                            Th∆∞∆°ng hi·ªáu
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="mobile-menu-accordion-content" id="brands-accordion">
                            <ul class="mobile-menu-accordion-links" id="mobileMenuBrands">
                                <!-- Dynamic content will be loaded here -->
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion cho B·ªô s∆∞u t·∫≠p -->
                <div class="mobile-menu-accordion">
                    <div class="mobile-menu-accordion-item">
                        <button class="mobile-menu-accordion-trigger" aria-expanded="false" aria-controls="collections-accordion">
                            B·ªô s∆∞u t·∫≠p
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="mobile-menu-accordion-content" id="collections-accordion">
                            <ul class="mobile-menu-accordion-links">
                                <li>
                                    <a href="/collections/nike-running" data-collection="nike-running" data-tracking="collection">
                                        Nike Running
                                        <span class="mega-menu-badge sale">-30%</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/adidas-training" data-collection="adidas-training" data-tracking="collection">
                                        Adidas Training
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/puma-lifestyle" data-collection="puma-lifestyle" data-tracking="collection">
                                        Puma Lifestyle
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/vans-skate" data-collection="vans-skate" data-tracking="collection">
                                        Vans Skate
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mobile-menu-footer">
                <div class="mobile-menu-shortcuts">
                    <a href="/products?discount=true" class="mobile-menu-shortcut" data-tracking="promo-discount">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 8px;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                        </svg>
                        Gi·∫£m gi√°
                    </a>
                    <a href="/products?new=true" class="mobile-menu-shortcut secondary" data-tracking="promo-new">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 8px;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        M·ªõi v·ªÅ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header Scripts Fragment -->
    <th:block th:fragment="header-scripts">
        <script src="/js/home.js"></script>
        <script src="/js/toast.js"></script>
        
        <!-- User Dropdown JavaScript -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const profileToggle = document.getElementById('profileToggle');
                const userDropdown = document.getElementById('userDropdown');
                
                if (profileToggle && userDropdown) {
                    // Toggle dropdown on click
                    profileToggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        userDropdown.classList.toggle('show');
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!profileToggle.contains(e.target) && !userDropdown.contains(e.target)) {
                            userDropdown.classList.remove('show');
                        }
                    });
                    
                    // Close dropdown when pressing Escape
                    document.addEventListener('keydown', function(e) {
                        if (e.key === 'Escape') {
                            userDropdown.classList.remove('show');
                        }
                    });
                }
            });
        </script>
        
        <!-- User Dropdown Styles -->
        <style>
            .user-menu {
                position: relative;
                display: inline-block;
            }
            
            .user-dropdown {
                display: none;
                position: absolute;
                right: 0;
                top: 100%;
                background: white;
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                min-width: 200px;
                z-index: 1000;
                margin-top: 8px;
            }
            
            .user-dropdown.show {
                display: block;
            }
            
            .dropdown-item {
                display: block;
                padding: 12px 16px;
                color: #374151;
                text-decoration: none;
                transition: background-color 0.2s;
                border: none;
                background: none;
                width: 100%;
                text-align: left;
                font-size: 14px;
            }
            
            .dropdown-item:hover {
                background-color: #f3f4f6;
                color: #111827;
            }
            
            .dropdown-divider {
                height: 1px;
                background-color: #e5e7eb;
                margin: 8px 0;
            }
            
            .admin-link {
                color: #f59e0b !important;
                font-weight: 600;
            }
            
            .staff-link {
                color: #3b82f6 !important;
                font-weight: 600;
            }
            
            .nav-icon {
                position: relative;
            }
        </style>
    </th:block>
</body>
</html>

