<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activewear Store - Trang ph·ª•c th·ªÉ thao ch√≠nh h√£ng</title>
    <meta name="description" content="Mua ƒë·ªì th·ªÉ thao ch√≠nh h√£ng ‚Äì giao nhanh 24‚Äì48h, ƒë·ªïi tr·∫£ 7 ng√†y. Gi√†y ch·∫°y, √°o thun, ph·ª• ki·ªán t·ª´ Nike, Adidas, Puma‚Ä¶">
    <meta name="keywords" content="ƒë·ªì th·ªÉ thao, gi√†y ch·∫°y, √°o thun, ph·ª• ki·ªán th·ªÉ thao, Nike, Adidas, Puma, Vans, ch√≠nh h√£ng">
    <meta name="author" content="Activewear Store">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://activewearstore.com/">
    
    <!-- Schema.org Organization Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Activewear Store",
        "description": "C·ª≠a h√†ng th·ªùi trang th·ªÉ thao ch√≠nh h√£ng",
        "url": "https://activewearstore.com",
        "logo": "https://activewearstore.com/images/logo.png",
        "sameAs": [
            "https://facebook.com/activewearstore",
            "https://instagram.com/activewearstore"
        ]
    }
    </script>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://activewearstore.com/">
    <meta property="og:title" content="Activewear Store - Trang ph·ª•c th·ªÉ thao ch√≠nh h√£ng">
    <meta property="og:description" content="Mua ƒë·ªì th·ªÉ thao ch√≠nh h√£ng ‚Äì giao nhanh 24‚Äì48h, ƒë·ªïi tr·∫£ 7 ng√†y. Gi√†y ch·∫°y, √°o thun, ph·ª• ki·ªán t·ª´ Nike, Adidas, Puma‚Ä¶">
    <meta property="og:image" content="https://activewearstore.com/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://activewearstore.com/">
    <meta property="twitter:title" content="Activewear Store - Trang ph·ª•c th·ªÉ thao ch√≠nh h√£ng">
    <meta property="twitter:description" content="Mua ƒë·ªì th·ªÉ thao ch√≠nh h√£ng ‚Äì giao nhanh 24‚Äì48h, ƒë·ªïi tr·∫£ 7 ng√†y. Gi√†y ch·∫°y, √°o thun, ph·ª• ki·ªán t·ª´ Nike, Adidas, Puma‚Ä¶">
    <meta property="twitter:image" content="https://activewearstore.com/images/og-image.jpg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet"></noscript>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/css/main.css" as="style">
    <link rel="preload" href="/css/home.css" as="style">
    <link rel="preload" href="/js/home.js" as="script">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="/css/product-card.css">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Store",
        "name": "Activewear Store",
        "description": "C·ª≠a h√†ng trang ph·ª•c th·ªÉ thao ch√≠nh h√£ng t·∫°i Vi·ªát Nam",
        "url": "https://activewearstore.com",
        "logo": "https://activewearstore.com/images/logo.png",
        "image": "https://activewearstore.com/images/og-image.jpg",
        "telephone": "19001234",
        "email": "datnfpolysd45@gmail.com",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "VN",
            "addressLocality": "H√† N·ªôi"
        },
        "openingHours": "Mo-Su 00:00-23:59",
        "paymentAccepted": ["Cash", "Credit Card", "Bank Transfer", "VNPay", "MoMo"],
        "priceRange": "$$",
        "currenciesAccepted": "VND",
        "sameAs": [
            "https://facebook.com/activewearstore",
            "https://instagram.com/activewearstore",
            "https://tiktok.com/@activewearstore"
        ]
    }
    </script>
</head>
<body>
    <!-- Promo Bar -->
    <div class="promo-bar">
        <div class="container">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            <span>FREESHIP ƒë∆°n t·ª´ 499k ‚Äì HN/HCM trong 24h</span>
        </div>
    </div>

    <!-- Header Sticky -->
    <header class="header-sticky">
        <div class="container">
            <div class="header-content">
                <!-- Logo and Categories -->
                <div style="display: flex; align-items: center; gap: var(--space-4);">
                    <a href="/" class="logo">
                        <svg class="logo-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                        Activewear Store
                    </a>
                    <button class="btn btn-ghost btn-sm" id="categoriesTrigger" style="display: flex; align-items: center; gap: var(--space-2);">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                        Danh m·ª•c
                    </button>
                </div>

                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="T√¨m gi√†y, √°o, ph·ª• ki·ªán‚Ä¶" id="searchInput" autocomplete="off">
                    <button class="search-button" type="button" id="searchButton">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>
                </div>

                <!-- Navigation Icons -->
                <div class="nav-icons">
                    <a href="/hotline" class="nav-icon" title="Hotline">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                        </svg>
                    </a>
                    
                    <!-- User menu for logged in users -->
                    <div class="user-menu" th:if="${user != null}">
                        <a href="#" class="nav-icon" title="Profile" id="profileToggle">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </a>
                        <div class="user-dropdown" id="userDropdown">
                            <!-- Admin/Staff Links -->
                            <a th:if="${isAdmin}" href="/admin" class="dropdown-item admin-link">
                                üëë Admin Panel
                            </a>
                            <a th:if="${isStaff}" href="/admin" class="dropdown-item staff-link">
                                üë®‚Äçüíº Staff Panel
                            </a>
                            <div th:if="${isAdmin or isStaff}" class="dropdown-divider"></div>
                            <!-- User Links -->
                            <a href="/profile" class="dropdown-item">
                                üë§ H·ªì s∆° c√° nh√¢n
                            </a>
                            <a href="/orders" class="dropdown-item">
                                üìã ƒê∆°n h√†ng c·ªßa t√¥i
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="/logout" class="dropdown-item">
                                üö™ ƒêƒÉng xu·∫•t
                            </a>
                        </div>
                    </div>
                    
                    <!-- Login link for non-logged in users -->
                    <a href="/login" class="nav-icon" title="ƒêƒÉng nh·∫≠p" th:if="${user == null}">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </a>
                    
                    <a href="/favorites" class="nav-icon" title="Y√™u th√≠ch">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </a>
                    
                    <a href="/cart" class="nav-icon" title="Gi·ªè h√†ng">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                        </svg>
                        <span class="badge" id="cartBadge" th:text="${cartItemCount != null ? cartItemCount : 0}">0</span>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Mega Menu -->
        <div class="mega-menu" id="megaMenu" role="dialog" aria-label="Danh m·ª•c s·∫£n ph·∫©m">
            <div class="mega-menu-content">
                <!-- Danh m·ª•c ch√≠nh -->
                <div class="mega-menu-section">
                    <h4>Danh m·ª•c ch√≠nh</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?category=nam" class="mega-menu-item" data-category="nam" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Nam
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=nu" class="mega-menu-item" data-category="nu" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                N·ªØ
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=chay-bo" class="mega-menu-item" data-category="chay-bo" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                Ch·∫°y b·ªô
                                <span class="mega-menu-badge hot">Hot</span>
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=gym-yoga" class="mega-menu-item" data-category="gym-yoga" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                Gym/Yoga
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=bong-da" class="mega-menu-item" data-category="bong-da" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                                </svg>
                                B√≥ng ƒë√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=phu-kien" class="mega-menu-item" data-category="phu-kien" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                                Ph·ª• ki·ªán
                                <span class="mega-menu-badge new">M·ªõi</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Th∆∞∆°ng hi·ªáu -->
                <div class="mega-menu-section">
                    <h4>Th∆∞∆°ng hi·ªáu</h4>
                    <ul class="mega-menu-links" id="megaMenuBrands">
                        <!-- Dynamic content will be loaded here -->
                    </ul>
                </div>

                <!-- B·ªô s∆∞u t·∫≠p -->
                <div class="mega-menu-section">
                    <h4>B·ªô s∆∞u t·∫≠p</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/collections/nike-running" class="mega-menu-item" data-collection="nike-running" data-tracking="collection">
                                Nike Running
                                <span class="mega-menu-badge sale">-30%</span>
                            </a>
                        </li>
                        <li>
                            <a href="/collections/adidas-training" class="mega-menu-item" data-collection="adidas-training" data-tracking="collection">
                                Adidas Training
                            </a>
                        </li>
                        <li>
                            <a href="/collections/puma-lifestyle" class="mega-menu-item" data-collection="puma-lifestyle" data-tracking="collection">
                                Puma Lifestyle
                            </a>
                        </li>
                        <li>
                            <a href="/collections/vans-skate" class="mega-menu-item" data-collection="vans-skate" data-tracking="collection">
                                Vans Skate
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- ∆Øu ƒë√£i -->
                <div class="mega-menu-section">
                    <h4>∆Øu ƒë√£i</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?discount=true" class="mega-menu-item" data-tracking="promo-discount">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                </svg>
                                S·∫£n ph·∫©m gi·∫£m gi√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?new=true" class="mega-menu-item" data-tracking="promo-new">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                H√†ng m·ªõi v·ªÅ
                            </a>
                        </li>
                        <li>
                            <a href="/products?bestseller=true" class="mega-menu-item" data-tracking="promo-bestseller">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                                </svg>
                                B√°n ch·∫°y nh·∫•t
                            </a>
                        </li>
                        <li>
                            <a href="/promotions" class="mega-menu-item" data-tracking="promo-special">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                </svg>
                                Khuy·∫øn m√£i ƒë·∫∑c bi·ªát
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Promo Card (conditional) -->
                <div class="promo-card" id="promoCard" style="display: none;">
                    <img src="" alt="" class="promo-card-image" id="promoCardImage">
                    <div class="promo-card-content">
                        <h3 class="promo-card-title" id="promoCardTitle"></h3>
                        <p class="promo-card-subtitle" id="promoCardSubtitle"></p>
                        <a href="#" class="promo-card-cta" id="promoCardCta">Kh√°m ph√°</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Off-Canvas Menu -->
    <div class="mobile-menu-overlay" id="mobileMenu" role="dialog" aria-label="Menu danh m·ª•c" aria-hidden="true">
        <div class="mobile-menu-backdrop"></div>
        <div class="mobile-menu-panel">
            <div class="mobile-menu-header">
                <h3 class="mobile-menu-title">Danh m·ª•c</h3>
                <button class="mobile-menu-close" aria-label="ƒê√≥ng menu">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="mobile-menu-body">
                <!-- Danh m·ª•c ch√≠nh -->
                <div class="mobile-menu-section">
                    <h4 class="mobile-menu-section-title">Danh m·ª•c ch√≠nh</h4>
                    <ul class="mega-menu-links">
                        <li>
                            <a href="/products?category=nam" class="mega-menu-item" data-category="nam" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Nam
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=nu" class="mega-menu-item" data-category="nu" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                N·ªØ
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=chay-bo" class="mega-menu-item" data-category="chay-bo" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                Ch·∫°y b·ªô
                                <span class="mega-menu-badge hot">Hot</span>
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=gym-yoga" class="mega-menu-item" data-category="gym-yoga" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                Gym/Yoga
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=bong-da" class="mega-menu-item" data-category="bong-da" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                                </svg>
                                B√≥ng ƒë√°
                            </a>
                        </li>
                        <li>
                            <a href="/products?category=phu-kien" class="mega-menu-item" data-category="phu-kien" data-tracking="main-category">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                                Ph·ª• ki·ªán
                                <span class="mega-menu-badge new">M·ªõi</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Accordion cho Th∆∞∆°ng hi·ªáu -->
                <div class="mobile-menu-accordion">
                    <div class="mobile-menu-accordion-item">
                        <button class="mobile-menu-accordion-trigger" aria-expanded="false" aria-controls="brands-accordion">
                            Th∆∞∆°ng hi·ªáu
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="mobile-menu-accordion-content" id="brands-accordion">
                            <ul class="mobile-menu-accordion-links" id="mobileMenuBrands">
                                <!-- Dynamic content will be loaded here -->
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion cho B·ªô s∆∞u t·∫≠p -->
                <div class="mobile-menu-accordion">
                    <div class="mobile-menu-accordion-item">
                        <button class="mobile-menu-accordion-trigger" aria-expanded="false" aria-controls="collections-accordion">
                            B·ªô s∆∞u t·∫≠p
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="mobile-menu-accordion-content" id="collections-accordion">
                            <ul class="mobile-menu-accordion-links">
                                <li>
                                    <a href="/collections/nike-running" data-collection="nike-running" data-tracking="collection">
                                        Nike Running
                                        <span class="mega-menu-badge sale">-30%</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/adidas-training" data-collection="adidas-training" data-tracking="collection">
                                        Adidas Training
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/puma-lifestyle" data-collection="puma-lifestyle" data-tracking="collection">
                                        Puma Lifestyle
                                    </a>
                                </li>
                                <li>
                                    <a href="/collections/vans-skate" data-collection="vans-skate" data-tracking="collection">
                                        Vans Skate
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mobile-menu-footer">
                <div class="mobile-menu-shortcuts">
                    <a href="/products?discount=true" class="mobile-menu-shortcut" data-tracking="promo-discount">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 8px;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                        </svg>
                        Gi·∫£m gi√°
                    </a>
                    <a href="/products?new=true" class="mobile-menu-shortcut secondary" data-tracking="promo-new">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 16px; height: 16px; margin-right: 8px;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        M·ªõi v·ªÅ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Banner Carousel (Image Only) -->
    <section class="banner-carousel parallax-element" data-speed="0.5">
        <div class="carousel-container">
            <div class="carousel-wrapper">
                <div class="carousel-slides">
                    <!-- Slide 1 -->
                    <div class="carousel-slide active">
                        <img src="/images/banners/slider_2.webp" alt="Banner 1 - Nike Running Collection" class="carousel-image parallax-element" data-speed="0.3">
                    </div>
                    
                    <!-- Slide 2 -->
                    <div class="carousel-slide">
                        <img src="/images/banners/slider_3.webp" alt="Banner 2 - Adidas Training" class="carousel-image parallax-element" data-speed="0.3" loading="lazy">
                    </div>
                    
                    <!-- Slide 3 -->
                    <div class="carousel-slide">
                        <img src="/images/banners/slider_4.webp" alt="Banner 3 - Summer Collection" class="carousel-image parallax-element" data-speed="0.3" loading="lazy">
                    </div>
                </div>
                
                <!-- Navigation Arrows -->
                <button class="carousel-nav carousel-prev" aria-label="Banner tr∆∞·ªõc">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <button class="carousel-nav carousel-next" aria-label="Banner ti·∫øp">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                
                <!-- Dots Indicator -->
                <div class="carousel-dots">
                    <button class="carousel-dot active" data-slide="0" aria-label="Banner 1"></button>
                    <button class="carousel-dot" data-slide="1" aria-label="Banner 2"></button>
                    <button class="carousel-dot" data-slide="2" aria-label="Banner 3"></button>
                </div>
            </div>
        </div>
    </section>

    <!-- Intro Band Section -->
    <section class="intro-band scroll-animate">
        <div class="container">
            <div class="intro-content">
                <h1 class="intro-title scroll-animate scroll-animate-delay-1">N√¢ng C·∫•p Phong C√°ch Th·ªÉ Thao C·ªßa B·∫°n</h1>
                <p class="intro-subtitle scroll-animate scroll-animate-delay-2">Kh√°m ph√° b·ªô s∆∞u t·∫≠p ƒë·ªì th·ªÉ thao ch√≠nh h√£ng t·ª´ Nike, Adidas, Puma & nhi·ªÅu th∆∞∆°ng hi·ªáu h√†ng ƒë·∫ßu. Giao nhanh 24h - ƒê·ªïi tr·∫£ mi·ªÖn ph√≠ trong 30 ng√†y.</p>
                <div class="intro-actions scroll-animate scroll-animate-delay-3">
                    <a href="/products" class="btn btn-primary btn-lg">Mua s·∫Øm ngay</a>
                    <a href="/collections" class="btn btn-outline btn-lg">Xem b·ªô s∆∞u t·∫≠p</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Categories -->
    <section class="quick-categories scroll-animate">
        <div class="container">
            <div class="section-title scroll-animate scroll-animate-delay-1">
                <h2>Danh m·ª•c n·ªïi b·∫≠t</h2>
                <p>Kh√°m ph√° c√°c s·∫£n ph·∫©m th·ªÉ thao ch·∫•t l∆∞·ª£ng cao</p>
            </div>
            <div class="categories-grid scroll-animate scroll-animate-delay-2" id="quickCategories">
                <!-- Dynamic content will be loaded here -->
                <a href="/products?category=nam" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <div class="category-name">Nam</div>
                </a>
                <a href="/products?category=nu" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <div class="category-name">N·ªØ</div>
                </a>
                <a href="/products?category=chay-bo" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    <div class="category-name">Ch·∫°y b·ªô</div>
                </a>
                <a href="/products?category=gym-yoga" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                    <div class="category-name">Gym/Yoga</div>
                </a>
                <a href="/products?category=bong-da" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                    </svg>
                    <div class="category-name">B√≥ng ƒë√°</div>
                </a>
                <a href="/products?category=phu-kien" class="category-card">
                    <svg class="category-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                    </svg>
                    <div class="category-name">Ph·ª• ki·ªán</div>
                </a>
            </div>
        </div>
    </section>


    <!-- Featured Products -->
    <section class="featured-products scroll-animate">
        <div class="container">
            <div class="section-title scroll-animate scroll-animate-delay-1">
                <h2>S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
                <p>Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>
            </div>
            
            <div class="products-tabs">
                <button class="tab-button active" data-tab="new">M·ªõi</button>
                <button class="tab-button" data-tab="best-selling">B√°n ch·∫°y</button>
                <button class="tab-button" data-tab="discounted">Gi√° t·ªët</button>
            </div>
            
            <div class="product-grid" id="productGrid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Collection Banners -->
    <section class="collection-banners scroll-animate">
        <div class="container">
                    <div class="banners-grid scroll-animate scroll-animate-delay-1">
                        <a href="/collections/nike-running" class="banner-card">
                            <div class="banner-image" style="background: linear-gradient(135deg, #1f2937 0%, #374151 100%);">
                                <img src="/images/banners/slider_2.webp" alt="Nike Running Collection SS/2025" class="banner-bg-image" loading="lazy">
                            </div>
                            <div class="banner-caption-card">
                                <h3 class="banner-caption-title">Nike Running ‚Ä¢ SS/2025</h3>
                                <p class="banner-caption-subtitle">Gi√†y ch·∫°y nh·∫π nh·∫•t cho m·ªçi runner</p>
                                <span class="banner-caption-cta">Kh√°m ph√° ‚Üí</span>
                            </div>
                        </a>
                        <a href="/collections/adidas-training" class="banner-card">
                            <div class="banner-image" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);">
                                <img src="/images/banners/slider_3.webp" alt="Adidas Training Collection SS/2025" class="banner-bg-image" loading="lazy">
                            </div>
                            <div class="banner-caption-card">
                                <h3 class="banner-caption-title">Adidas Training ‚Ä¢ SS/2025</h3>
                                <p class="banner-caption-subtitle">Trang ph·ª•c t·∫≠p luy·ªán hi·ªáu su·∫•t cao</p>
                                <span class="banner-caption-cta">Kh√°m ph√° ‚Üí</span>
                            </div>
                        </a>
                    </div>
        </div>
    </section>

    <!-- Brand Strip -->
    <section class="brand-strip">
        <div class="container">
            <div class="brands-container" id="brandStrip">
                <!-- Dynamic content will be loaded here -->
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">Nike</div>
                </div>
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">Adidas</div>
                </div>
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">Puma</div>
                </div>
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">Vans</div>
                </div>
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">Converse</div>
                </div>
                <div class="brand-logo">
                    <div class="brand-logo-placeholder">New Balance</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog/Guides -->
    <section class="blog-section scroll-animate">
        <div class="container">
            <div class="section-title scroll-animate scroll-animate-delay-1">
                <h2>C·∫©m nang luy·ªán t·∫≠p</h2>
                <p>H∆∞·ªõng d·∫´n v√† m·∫πo hay cho vi·ªác luy·ªán t·∫≠p th·ªÉ thao</p>
                <a href="/blog" class="view-all-link">Xem t·∫•t c·∫£ b√†i vi·∫øt</a>
            </div>
            <div class="blog-grid scroll-animate scroll-animate-delay-2">
                <article class="blog-card">
                    <div class="blog-image-placeholder">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="blog-content">
                        <span class="blog-tag">Size</span>
                        <h3 class="blog-title">Ch·ªçn size gi√†y ch·∫°y ƒë√∫ng c√°ch</h3>
                        <p class="blog-excerpt">H∆∞·ªõng d·∫´n chi ti·∫øt c√°ch ch·ªçn size gi√†y ch·∫°y ph√π h·ª£p v·ªõi ch√¢n v√† phong c√°ch ch·∫°y c·ªßa b·∫°n.</p>
                        <div class="blog-meta">
                            <span>5 ph√∫t ƒë·ªçc</span>
                            <span>‚Ä¢</span>
                            <span>2 ng√†y tr∆∞·ªõc</span>
                        </div>
                    </div>
                </article>
                <article class="blog-card">
                    <div class="blog-image-placeholder">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="blog-content">
                        <span class="blog-tag">Tips</span>
                        <h3 class="blog-title">Mix ƒë·ªì gym phong c√°ch</h3>
                        <p class="blog-excerpt">B√≠ quy·∫øt ph·ªëi ƒë·ªì gym v·ª´a tho·∫£i m√°i v·ª´a th·ªùi trang, ph√π h·ª£p v·ªõi m·ªçi phong c√°ch c√° nh√¢n.</p>
                        <div class="blog-meta">
                            <span>3 ph√∫t ƒë·ªçc</span>
                            <span>‚Ä¢</span>
                            <span>1 tu·∫ßn tr∆∞·ªõc</span>
                        </div>
                    </div>
                </article>
                <article class="blog-card">
                    <div class="blog-image-placeholder">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="blog-content">
                        <span class="blog-tag">Workout</span>
                        <h3 class="blog-title">B·∫£o qu·∫£n ƒë·ªì th·ªÉ thao</h3>
                        <p class="blog-excerpt">C√°ch gi·ªØ g√¨n v√† b·∫£o qu·∫£n trang ph·ª•c th·ªÉ thao ƒë·ªÉ ch√∫ng lu√¥n b·ªÅn ƒë·∫πp v√† s·∫°ch s·∫Ω.</p>
                        <div class="blog-meta">
                            <span>4 ph√∫t ƒë·ªçc</span>
                            <span>‚Ä¢</span>
                            <span>2 tu·∫ßn tr∆∞·ªõc</span>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter-section scroll-animate">
        <div class="container">
            <div class="newsletter-content scroll-animate scroll-animate-delay-1">
                <h2 class="newsletter-title">Nh·∫≠n ∆∞u ƒë√£i ƒë·∫∑c bi·ªát</h2>
                <p class="newsletter-description">ƒêƒÉng k√Ω nh·∫≠n m√£ gi·∫£m gi√° 10% cho l·∫ßn mua ƒë·∫ßu ti√™n</p>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" id="newsletterEmail" name="email" class="newsletter-input" placeholder="Nh·∫≠p email c·ªßa b·∫°n" autocomplete="email" required>
                    <button type="submit" class="newsletter-button">Nh·∫≠n m√£ -10%</button>
                </form>
                <div class="newsletter-error" id="newsletterError" style="display: none;"></div>
                <p class="newsletter-disclaimer">Kh√¥ng spam. Hu·ª∑ b·∫•t c·ª© l√∫c n√†o.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>V·ªÅ ch√∫ng t√¥i</h4>
                    <ul class="footer-links">
                        <li><a href="/about">Gi·ªõi thi·ªáu</a></li>
                        <li><a href="/careers">Tuy·ªÉn d·ª•ng</a></li>
                        <li><a href="/news">Tin t·ª©c</a></li>
                        <li><a href="/contact">Li√™n h·ªá</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>H·ªó tr·ª£</h4>
                    <ul class="footer-links">
                        <li><a href="/help">Trung t√¢m tr·ª£ gi√∫p</a></li>
                        <li><a href="/shipping">V·∫≠n chuy·ªÉn</a></li>
                        <li><a href="/returns">ƒê·ªïi tr·∫£</a></li>
                        <li><a href="/size-guide">H∆∞·ªõng d·∫´n ch·ªçn size</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Ch√≠nh s√°ch</h4>
                    <ul class="footer-links">
                        <li><a href="/privacy">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                        <li><a href="/terms">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                        <li><a href="/cookies">Ch√≠nh s√°ch cookie</a></li>
                        <li><a href="/warranty">B·∫£o h√†nh</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Li√™n h·ªá</h4>
                    <ul class="footer-links">
                        <li><a href="tel:19001234">1900 1234</a></li>
                        <li><a href="mailto:datnfpolysd45@gmail.com">datnfpolysd45@gmail.com</a></li>
                        <li><a href="/stores">C·ª≠a h√†ng</a></li>
                        <li>
                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <a href="#" style="color: rgba(255,255,255,0.8);">Facebook</a>
                                <a href="#" style="color: rgba(255,255,255,0.8);">Instagram</a>
                                <a href="#" style="color: rgba(255,255,255,0.8);">TikTok</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Activewear Store. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
                <div style="margin-top: 16px; display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; align-items: center;">
                    <span>Thanh to√°n:</span>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <span style="background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px; font-size: 12px;">VNPay</span>
                        <span style="background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px; font-size: 12px;">MoMo</span>
                        <span style="background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px; font-size: 12px;">COD</span>
                        <span style="background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px; font-size: 12px;">Chuy·ªÉn kho·∫£n</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Custom CSS for User Dropdown -->
    <style>
        .user-menu {
            position: relative;
            display: inline-block;
        }
        
        .user-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            z-index: 1000;
            margin-top: 8px;
        }
        
        .user-dropdown.show {
            display: block;
        }
        
        .dropdown-item {
            display: block;
            padding: 12px 16px;
            color: #374151;
            text-decoration: none;
            transition: background-color 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 14px;
        }
        
        .dropdown-item:hover {
            background-color: #f3f4f6;
            color: #111827;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: #e5e7eb;
            margin: 8px 0;
        }
        
        .admin-link {
            color: #f59e0b !important;
            font-weight: 600;
        }
        
        .staff-link {
            color: #3b82f6 !important;
            font-weight: 600;
        }
        
        .nav-icon {
            position: relative;
        }
    </style>

    <!-- JavaScript -->
    <script src="/js/scroll-animations.js"></script>
    <script src="/js/home.js"></script>
    
    <!-- Product Grid JavaScript -->
    <script>
        let products = [];
        let currentTab = 'new';

        // Load products from backend
        async function loadProducts(tab = 'new') {
            try {
                const response = await fetch(`/api/products/featured?tab=${tab}&limit=10`);
                const data = await response.json();
                
                if (data.success) {
                    products = data.products || [];
                    renderProducts();
                } else {
                    console.error('Error loading products:', data.message);
                }
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            if (!grid) return;
            
            // Clear existing products
            grid.innerHTML = '';
            
            if (products.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o</div>';
                return;
            }
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                
                // Generate color dots based on real product variants
                let colorsHTML = '';
                
                // Debug logging
                console.log('Product data:', product);
                console.log('Product variants:', product.bienTheSanPhams);
                
                if (product.bienTheSanPhams && product.bienTheSanPhams.length > 0) {
                    // Get unique colors from product variants, filter out null/empty values
                    const uniqueColors = [...new Set(product.bienTheSanPhams
                        .map(variant => variant.mauSac)
                        .filter(color => color && color.trim() !== '' && color !== 'null'))];
                    
                    console.log('Unique colors found:', uniqueColors);
                    
                    if (uniqueColors.length > 0) {
                        colorsHTML = uniqueColors.map(color => {
                            // Map Vietnamese color names to hex codes
                            const colorMap = {
                                'ƒêen': '#1a1a1a',
                                'Tr·∫Øng': '#ffffff', 
                                'ƒê·ªè': '#ff0000',
                                'Xanh': '#0000ff',
                                'X√°m': '#808080',
                                'V√†ng': '#ffff00',
                                'H·ªìng': '#ffc0cb',
                                'T√≠m': '#800080',
                                'Cam': '#ffa500',
                                'N√¢u': '#8b4513'
                            };
                            
                            const hexColor = colorMap[color] || color;
                            const isDark = ['#1a1a1a', '#8b1538', '#000000', '#000', 'black', '#1a1a1a'].includes(hexColor?.toLowerCase());
                            
                            return `<div class="color-dot ${isDark ? 'dark' : ''}" 
                                         style="background-color: ${hexColor}" 
                                         title="${color}"></div>`;
                        }).join('');
                    } else {
                        // If no valid colors in variants, use default
                        colorsHTML = `
                            <div class="color-dot" style="background-color: #1a1a1a" title="ƒêen"></div>
                            <div class="color-dot" style="background-color: #ffffff; border: 2px solid #ccc;" title="Tr·∫Øng"></div>
                            <div class="color-dot" style="background-color: #ff0000" title="ƒê·ªè"></div>
                        `;
                    }
                } else {
                    console.log('No variants found, using default colors');
                    // Default colors if no variants or variants is null
                    colorsHTML = `
                        <div class="color-dot" style="background-color: #1a1a1a" title="ƒêen"></div>
                        <div class="color-dot" style="background-color: #ffffff; border: 2px solid #ccc;" title="Tr·∫Øng"></div>
                        <div class="color-dot" style="background-color: #ff0000" title="ƒê·ªè"></div>
                    `;
                }
                
                // Format price
                const formattedPrice = new Intl.NumberFormat('vi-VN', {
                    style: 'currency',
                    currency: 'VND'
                }).format(product.gia);
                
                card.innerHTML = `
                    <div class="product-image-wrapper">
                        <img src="${product.anhChinh || '/images/no-image.svg'}" 
                             alt="${product.ten}" 
                             class="product-image"
                             onerror="this.src='/images/no-image.svg'">
                        ${product.noiBat ? '<div class="new-badge">HOT</div>' : ''}
                        ${product.giamGia ? '<div class="new-badge">SALE</div>' : ''}
                    </div>
                    <div class="product-info">
                        <div class="product-brand">${product.danhMuc?.ten || 'BRAND'}</div>
                        <h3 class="product-name">${product.ten}</h3>
                        <div class="product-price">${formattedPrice}</div>
                        <div class="color-selector">
                            ${colorsHTML}
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    window.location.href = `/products/${product.id}`;
                });
                
                grid.appendChild(card);
            });
        }

        // Color selector functionality
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('color-dot')) {
                const siblings = e.target.parentElement.querySelectorAll('.color-dot');
                siblings.forEach(dot => dot.classList.remove('active'));
                e.target.classList.add('active');
            }
        });

        // Tab switching functionality
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-button')) {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Add active class to clicked tab
                e.target.classList.add('active');
                
                // Update current tab and load products
                currentTab = e.target.dataset.tab;
                loadProducts(currentTab);
            }
        });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts('new');
        });
    </script>
    
    <!-- User Dropdown JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const profileToggle = document.getElementById('profileToggle');
            const userDropdown = document.getElementById('userDropdown');
            
            if (profileToggle && userDropdown) {
                // Toggle dropdown on click
                profileToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    userDropdown.classList.toggle('show');
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!profileToggle.contains(e.target) && !userDropdown.contains(e.target)) {
                        userDropdown.classList.remove('show');
                    }
                });
                
                // Close dropdown when pressing Escape
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        userDropdown.classList.remove('show');
                    }
                });
            }
        });
    </script>
</body>
</html>